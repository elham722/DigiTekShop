# DigiTekShop Secrets Manifest
# این فایل مرجع واحد برای تمام کلیدهای حساس پروژه است.
# هر کلید جدیدی که اضافه می‌کنی، باید ابتدا در اینجا ثبت شود.

ConnectionStrings:
  IdentityDBConnection:
    desc: "کانکشن دیتابیس لایه Identity (SQL Server)"
    env: [Development, Staging, Production]
    example: "Server=.;Database=DigiTekShopIdentity;Trusted_Connection=True;TrustServerCertificate=True"
  
  DBConnection:
    desc: "کانکشن دیتابیس اصلی اپلیکیشن (SQL Server)"
    env: [Development, Staging, Production]
    example: "Server=.;Database=DigiTekShop;Trusted_Connection=True;TrustServerCertificate=True"
  
  Redis:
    desc: "کانکشن Redis برای Cache/TokenBlacklist/OTP/RateLimit"
    env: [Development, Staging, Production]
    example: "localhost:6379,abortConnect=false"

RedisCache:
  InstanceName:
    desc: "پیشوند namespace برای کلیدهای Redis Cache"
    env: [All]
    example: "digitek:"

JwtSettings:
  Key:
    desc: "کلید امضای JWT (HS256) - حداقل 32 کاراکتر"
    env: [Development, Staging, Production]
    sensitive: true
    note: "در Production ترجیحاً از Vault/EnvVar استفاده شود"
  
  Issuer:
    desc: "Issuer برای JWT tokens"
    env: [All]
    example: "DigiTekShop"
  
  Audience:
    desc: "Audience برای JWT tokens"
    env: [All]
    example: "DigiTekShopClient"
  
  AccessTokenExpirationMinutes:
    desc: "زمان انقضای Access Token (دقیقه)"
    env: [All]
    example: 60
  
  RefreshTokenExpirationDays:
    desc: "زمان انقضای Refresh Token (روز)"
    env: [All]
    example: 30

RabbitMq:
  HostName:
    desc: "آدرس سرور RabbitMQ"
    env: [Development, Staging, Production]
    example: "localhost"
  
  Port:
    desc: "پورت RabbitMQ"
    env: [Development, Staging, Production]
    example: 5672
  
  VirtualHost:
    desc: "Virtual Host در RabbitMQ"
    env: [Development, Staging, Production]
    example: "/"
  
  UserName:
    desc: "نام کاربری RabbitMQ"
    env: [Development, Staging, Production]
    sensitive: true
  
  Password:
    desc: "رمز عبور RabbitMQ"
    env: [Development, Staging, Production]
    sensitive: true
  
  Exchange:
    desc: "نام Exchange برای پیام‌ها"
    env: [Development, Staging, Production]
    example: "digitekshop.exchange"
  
  ExchangeType:
    desc: "نوع Exchange (topic/fanout/direct)"
    env: [Development, Staging, Production]
    example: "topic"
  
  Durable:
    desc: "آیا Exchange باید پایدار باشد"
    env: [Development, Staging, Production]
    example: true

SmtpSettings:
  Host:
    desc: "آدرس سرور SMTP"
    env: [Development, Staging, Production]
    example: "smtp.gmail.com"
  
  Port:
    desc: "پورت SMTP"
    env: [Development, Staging, Production]
    example: 587
  
  Username:
    desc: "نام کاربری SMTP"
    env: [Development, Staging, Production]
    sensitive: true
  
  Password:
    desc: "رمز عبور SMTP"
    env: [Development, Staging, Production]
    sensitive: true
  
  EnableSsl:
    desc: "فعال‌سازی SSL/TLS"
    env: [Development, Staging, Production]
    example: true
  
  FromEmail:
    desc: "آدرس ایمیل فرستنده"
    env: [Development, Staging, Production]
    sensitive: true
  
  FromName:
    desc: "نام فرستنده"
    env: [Development, Staging, Production]
    example: "DigiTekShop"
  
  ReplyToEmail:
    desc: "آدرس ایمیل برای پاسخ"
    env: [Development, Staging, Production]

SmsIr:
  BaseUrl:
    desc: "URL پایه API سرویس SMS.ir"
    env: [All]
    example: "https://api.sms.ir/v1/"
  
  ApiKey:
    desc: "API Key برای دسترسی به سرویس SMS.ir"
    env: [Development, Staging, Production]
    sensitive: true
  
  ApiKeyHeaderName:
    desc: "نام هدر برای ارسال API Key"
    env: [All]
    example: "x-api-key"
  
  UltraFastPath:
    desc: "مسیر endpoint برای ارسال OTP"
    env: [All]
    example: "send/verify"
  
  TemplateId:
    desc: "شناسه قالب OTP در SMS.ir"
    env: [All]
    example: 123456
  
  TemplateParamName:
    desc: "نام پارامتر کد در قالب"
    env: [All]
    example: "Code"
  
  TimeoutSeconds:
    desc: "Timeout برای درخواست‌های HTTP (ثانیه)"
    env: [All]
    example: 15

PhoneVerification:
  CodeHashSecret:
    desc: "کلید مخفی برای hash کردن کد OTP"
    env: [Development, Staging, Production]
    sensitive: true
    note: "این کلید باید قوی و تصادفی باشد"

Auth:
  LoginFlow:
    RateLimit:
      Limit:
        desc: "حد مجاز درخواست‌های Login در پنجره زمانی"
        env: [All]
        example: 8
      
      WindowSeconds:
        desc: "طول پنجره زمانی Rate Limit برای Login (ثانیه)"
        env: [All]
        example: 60

# نکات مهم:
# - تمام کلیدهای با sensitive: true باید در Production از Vault/EnvVar استفاده شوند
# - هر کلید جدیدی که اضافه می‌کنی، باید در اینجا ثبت شود
# - برای Development می‌توان از appsettings.Local.json + User Secrets استفاده کرد
# - برای Staging/Production از Environment Variables یا Vault استفاده شود

